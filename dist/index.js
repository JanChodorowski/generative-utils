var T=Object.create;var m=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var C=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var G=t=>m(t,"__esModule",{value:!0});var B=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var N=(t,e,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of S(e))!E.call(t,r)&&r!=="default"&&m(t,r,{get:()=>e[r],enumerable:!(n=O(e,r))||n.enumerable});return t},V=t=>N(G(m(t!=null?T(C(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var p=B((ot,x)=>{(function(){function t(e,n,r,s){this.max_objects=n||10,this.max_levels=r||4,this.level=s||0,this.bounds=e,this.objects=[],this.nodes=[]}t.prototype.split=function(){var e=this.level+1,n=this.bounds.width/2,r=this.bounds.height/2,s=this.bounds.x,i=this.bounds.y;this.nodes[0]=new t({x:s+n,y:i,width:n,height:r},this.max_objects,this.max_levels,e),this.nodes[1]=new t({x:s,y:i,width:n,height:r},this.max_objects,this.max_levels,e),this.nodes[2]=new t({x:s,y:i+r,width:n,height:r},this.max_objects,this.max_levels,e),this.nodes[3]=new t({x:s+n,y:i+r,width:n,height:r},this.max_objects,this.max_levels,e)},t.prototype.getIndex=function(e){var n=[],r=this.bounds.x+this.bounds.width/2,s=this.bounds.y+this.bounds.height/2,i=e.y<s,h=e.x<r,c=e.x+e.width>r,d=e.y+e.height>s;return i&&c&&n.push(0),h&&i&&n.push(1),h&&d&&n.push(2),c&&d&&n.push(3),n},t.prototype.insert=function(e){var n=0,r;if(this.nodes.length){for(r=this.getIndex(e),n=0;n<r.length;n++)this.nodes[r[n]].insert(e);return}if(this.objects.push(e),this.objects.length>this.max_objects&&this.level<this.max_levels){for(this.nodes.length||this.split(),n=0;n<this.objects.length;n++){r=this.getIndex(this.objects[n]);for(var s=0;s<r.length;s++)this.nodes[r[s]].insert(this.objects[n])}this.objects=[]}},t.prototype.retrieve=function(e){var n=this.getIndex(e),r=this.objects;if(this.nodes.length)for(var s=0;s<n.length;s++)r=r.concat(this.nodes[n[s]].retrieve(e));return r=r.filter(function(i,h){return r.indexOf(i)>=h}),r},t.prototype.clear=function(){this.objects=[];for(var e=0;e<this.nodes.length;e++)this.nodes.length&&this.nodes[e].clear();this.nodes=[]},typeof x!="undefined"&&typeof x.exports!="undefined"?x.exports=t:window.Quadtree=t})()});function a(){if(Array.isArray(arguments[0])){let e=arguments[0];return e[a(0,e.length-1,!0)]}else{let e=arguments[0],n=arguments[1],r=arguments[2]||!1,s=Math.random()*(n-e)+e;return r?Math.round(s):s}}function q(t,e,n,r=.5){let s=a(t,e),i=a(0,1)*r;return s*(1-i)+n*i}function z(t,e,n){return Math.round(a(t,e)/n)*n}function W(t,e){if(t=[...t],Array.isArray(t[0])||(t=t.map(({x:n,y:r})=>[n,r])),e){let n=t[t.length-1],r=t[t.length-2],s=t[0],i=t[1];t.unshift(n),t.unshift(r),t.push(s),t.push(i)}return t.flat()}function X(t=[],e=1,n=!1,r){t=W(t,n);let s=t.length,i=s-4,h=n?t[2]:t[0],c=n?t[3]:t[1],d="M"+[h,c];r&&r("MOVE",[h,c]);let I=n?2:0,Q=n?s-4:s-2,P=2;for(let o=I;o<Q;o+=P){let _=o?t[o-2]:t[0],A=o?t[o-1]:t[1],l=t[o+0],g=t[o+1],u=t[o+2],f=t[o+3],M=o!==i?t[o+4]:u,L=o!==i?t[o+5]:f,y=l+(u-_)/6*e,j=g+(f-A)/6*e,v=u-(M-l)/6*e,w=f-(L-g)/6*e;d+="C"+[y,j,v,w,u,f],r&&r("CURVE",[y,j,v,w,u,f])}return d}function Y(t,e,n,r,s){return(t-e)/(n-e)*(s-r)+r}function H(t,e=10){let n=t.getTotalLength(),r=n/e,s=[];for(let i=0;i<n;i+=r)s.push(t.getPointAtLength(i));return s}function U(t){let e=t.createSVGPoint();return function(n){return e.x=n.clientX,e.y=n.clientY,e.matrixTransform(t.getScreenCTM().inverse())}}var b=V(p()),D={width:1024,height:1024,points:[],gap:0,maxQtObjects:10,maxQtLevels:4};function F(t,e,n){return{col:{start:t.x/e,end:(t.x+t.width)/e},row:{start:t.y/n,end:(t.y+t.height)/n}}}function J(t){let e=[];return function n(r){r.nodes.length===0?e.push(r):r.nodes.forEach(s=>n(s))}(t),e}function K(t){t=Object.assign({},D,t);let e=new b.default({x:0,y:0,width:t.width,height:t.height},t.maxQtObjects,t.maxQtLevels);t.points.forEach(i=>{e.insert(i)});let n=Math.pow(2,t.maxQtLevels),r=t.width/n,s=t.height/n;return{width:t.width,height:t.height,cols:n,rows:n,areas:J(e).map(({bounds:i})=>({x:i.x+t.gap,y:i.y+t.gap,width:i.width-t.gap*2,height:i.height-t.gap*2,...F(i,r,s)}))}}export{U as createCoordsTransformer,K as createQtGrid,Y as map,H as pointsInPath,a as random,q as randomBias,z as randomSnap,X as spline};
/**
 * quadtree-js
 * @version 1.2.4
 * @license MIT
 * @author Timo Hausmann
 */
